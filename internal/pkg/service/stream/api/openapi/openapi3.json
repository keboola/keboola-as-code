{"openapi":"3.0.3","info":{"title":"Stream Service","description":"A service for continuously importing data to the Keboola platform.","version":"1.0"},"servers":[{"url":"https://stream.{stack}","variables":{"stack":{"enum":["keboola.com","eu-central-1.keboola.com","north-europe.azure.keboola.com","eu-west-1.aws.keboola.dev","east-us-2.azure.keboola-testing.com"],"default":"keboola.com"}}},{"url":"http://localhost:8001"}],"paths":{"/":{"get":{"tags":["documentation"],"summary":"Redirect to /v1","description":"Redirect to /v1.","operationId":"ApiRootIndex","responses":{"301":{"description":"Moved Permanently response."}}}},"/v1":{"get":{"tags":["documentation"],"summary":"List API name and link to documentation.","description":"List API name and link to documentation.","operationId":"ApiVersionIndex","responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceDetail"},"example":{"api":"stream","documentation":"https://stream.keboola.com/v1/documentation"}}}}}}},"/v1/branches/{branchId}/sources":{"get":{"tags":["configuration"],"summary":"List all sources","description":"List all sources in the branch.","operationId":"ListSources","parameters":[{"name":"sinceId","in":"query","description":"Request records after the ID.","allowEmptyValue":true,"schema":{"type":"string","description":"Request records after the ID.","default":"","example":"my-object-123"},"example":"my-object-123"},{"name":"limit","in":"query","description":"Maximum number of returned records.","allowEmptyValue":true,"schema":{"type":"integer","description":"Maximum number of returned records.","default":100,"example":100,"format":"int64","minimum":1,"maximum":100},"example":100},{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SourcesList"},"example":{"projectId":123,"branchId":345,"page":{"limit":100,"totalCount":1000,"sinceId":"my-object-123","lastId":"my-object-456"},"sources":[{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github.","http":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}]}}}}},"security":[{"storage-api-token":[]}]},"post":{"tags":["configuration"],"summary":"Create source","description":"Create a new source in the branch.","operationId":"CreateSource","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSourceRequestBody"},"example":{"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github."}}}},"responses":{"202":{"description":"Accepted response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"},"example":{"taskId":"task_1234","type":"abc123","url":"abc123","status":"success","isFinished":false,"createdAt":"2022-04-28T14:20:04.000Z","finishedAt":"2022-04-28T14:20:04.000Z","duration":123456789,"result":"abc123","error":"abc123","outputs":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}}}}},"409":{"description":"stream.api.sourceAlreadyExists: Source already exists in the branch.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":409,"error":"stream.api.sourceAlreadyExists","message":"Source already exists in the branch."}}}},"422":{"description":"stream.api.resourceLimitReached: Resource limit reached.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":422,"error":"stream.api.resourceLimitReached","message":"Maximum number of sources per project is 100."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}":{"delete":{"tags":["configuration"],"summary":"Delete source","description":"Delete the source.","operationId":"DeleteSource","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"responses":{"200":{"description":"OK response."},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]},"get":{"tags":["configuration"],"summary":"Get source","description":"Get the source definition.","operationId":"GetSource","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Source"},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github.","http":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]},"patch":{"tags":["configuration"],"summary":"Update source","description":"Update the source.","operationId":"UpdateSource","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSourceRequestBody"},"example":{"changeDescription":"Renamed.","type":"http","name":"Github Webhook Source","description":"The source receives events from Github."}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"},"example":{"taskId":"task_1234","type":"abc123","url":"abc123","status":"success","isFinished":false,"createdAt":"2022-04-28T14:20:04.000Z","finishedAt":"2022-04-28T14:20:04.000Z","duration":123456789,"result":"abc123","error":"abc123","outputs":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/settings":{"get":{"tags":["configuration"],"summary":"Get source settings","description":"Get source settings.","operationId":"GetSourceSettings","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingsResult"},"example":{"settings":[{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"}]}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]},"patch":{"tags":["configuration"],"summary":"Update source settings","description":"Update source settings.","operationId":"UpdateSourceSettings","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSourceSettingsRequestBody"},"example":{"changeDescription":"Updated settings.","settings":[{"key":"some.service.limit","value":"1m20s"}]}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingsResult"},"example":{"settings":[{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"}]}}}},"404":{"description":"stream.api.forbidden: Modification of protected settings is forbidden.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.forbidden","message":"Cannot modify protected keys: \"storage.level.local.compression.gzip.blockSize\"."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/sinks":{"get":{"tags":["configuration"],"summary":"List sinks","description":"List all sinks in the source.","operationId":"ListSinks","parameters":[{"name":"sinceId","in":"query","description":"Request records after the ID.","allowEmptyValue":true,"schema":{"type":"string","description":"Request records after the ID.","default":"","example":"my-object-123"},"example":"my-object-123"},{"name":"limit","in":"query","description":"Maximum number of returned records.","allowEmptyValue":true,"schema":{"type":"integer","description":"Maximum number of returned records.","default":100,"example":100,"format":"int64","minimum":1,"maximum":100},"example":100},{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SinksList"},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","page":{"limit":100,"totalCount":1000,"sinceId":"my-object-123","lastId":"my-object-456"},"sinks":[{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}]}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]},"post":{"tags":["configuration"],"summary":"Create sink","description":"Create a new sink in the source.","operationId":"CreateSink","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSinkRequestBody"},"example":{"sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}}}}}},"responses":{"202":{"description":"Accepted response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"},"example":{"taskId":"task_1234","type":"abc123","url":"abc123","status":"success","isFinished":false,"createdAt":"2022-04-28T14:20:04.000Z","finishedAt":"2022-04-28T14:20:04.000Z","duration":123456789,"result":"abc123","error":"abc123","outputs":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}},"409":{"description":"stream.api.sinkAlreadyExists: Sink already exists in the source.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":409,"error":"stream.api.sinkAlreadyExists","message":"Sink already exists in the source."}}}},"422":{"description":"stream.api.resourceLimitReached: Resource limit reached.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":422,"error":"stream.api.resourceLimitReached","message":"Maximum number of sources per project is 100."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/sinks/{sinkId}":{"delete":{"tags":["configuration"],"summary":"Delete sink","description":"Delete the sink.","operationId":"DeleteSink","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"responses":{"200":{"description":"OK response."},"404":{"description":"stream.api.sinkNotFound: Sink not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sinkNotFound","message":"Sink \"github-changed-files\" not found."}}}}},"security":[{"storage-api-token":[]}]},"get":{"tags":["configuration"],"summary":"Get sink","description":"Get the sink definition.","operationId":"GetSink","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Sink"},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}}}},"404":{"description":"stream.api.sinkNotFound: Sink not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sinkNotFound","message":"Sink \"github-changed-files\" not found."}}}}},"security":[{"storage-api-token":[]}]},"patch":{"tags":["configuration"],"summary":"Update sink","description":"Update the sink.","operationId":"UpdateSink","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSinkRequestBody"},"example":{"changeDescription":"Renamed.","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}}}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"},"example":{"taskId":"task_1234","type":"abc123","url":"abc123","status":"success","isFinished":false,"createdAt":"2022-04-28T14:20:04.000Z","finishedAt":"2022-04-28T14:20:04.000Z","duration":123456789,"result":"abc123","error":"abc123","outputs":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}}}}},"404":{"description":"stream.api.sinkNotFound: Sink not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sinkNotFound","message":"Sink \"github-changed-files\" not found."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/sinks/{sinkId}/settings":{"get":{"tags":["configuration"],"summary":"Get sink settings","description":"Get the sink settings.","operationId":"GetSinkSettings","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingsResult"},"example":{"settings":[{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"}]}}}},"404":{"description":"stream.api.sinkNotFound: Sink not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sinkNotFound","message":"Sink \"github-changed-files\" not found."}}}}},"security":[{"storage-api-token":[]}]},"patch":{"tags":["configuration"],"summary":"Update sink settings","description":"Update sink settings.","operationId":"UpdateSinkSettings","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSourceSettingsRequestBody"},"example":{"changeDescription":"Updated settings.","settings":[{"key":"some.service.limit","value":"1m20s"}]}}}},"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingsResult"},"example":{"settings":[{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"}]}}}},"404":{"description":"stream.api.forbidden: Modification of protected settings is forbidden.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.forbidden","message":"Cannot modify protected keys: \"storage.level.local.compression.gzip.blockSize\"."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/sinks/{sinkId}/statistics/files":{"get":{"tags":["configuration"],"summary":"Sink files statistics","description":"Get files statistics of the sink.","operationId":"SinkStatisticsFiles","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SinkStatisticsFilesResult"},"example":{"files":[{"state":"writing","openedAt":"2022-04-28T14:20:04.000Z","closingAt":"2022-04-28T14:20:04.000Z","importingAt":"2022-04-28T14:20:04.000Z","importedAt":"2022-04-28T14:20:04.000Z","statistics":{"total":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"levels":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}}}}]}}}},"404":{"description":"stream.api.sinkNotFound: Sink not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sinkNotFound","message":"Sink \"github-changed-files\" not found."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/sinks/{sinkId}/statistics/total":{"get":{"tags":["configuration"],"summary":"Sink statistics total","description":"Get total statistics of the sink.","operationId":"SinkStatisticsTotal","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"},{"name":"sinkId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"example":"github-pr-table-sink"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SinkStatisticsTotalResult"},"example":{"total":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"levels":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}}}}}},"404":{"description":"stream.api.sinkNotFound: Sink not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sinkNotFound","message":"Sink \"github-changed-files\" not found."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/test":{"post":{"tags":["test"],"summary":"Test source payload mapping.","description":"Tests configured mapping of the source and its sinks.","operationId":"TestSource","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TestResult"},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","tables":[{"sinkId":"github-pr-table-sink","tableId":"in.c-bucket.table","rows":[{"columns":[{"name":"id","value":"12345"}]}]}]}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/branches/{branchId}/sources/{sourceId}/tokens/refresh":{"post":{"tags":["configuration"],"summary":"Refresh source tokens","description":"Each sink uses its own token scoped to the target bucket, this endpoint refreshes all of those tokens.","operationId":"RefreshSourceTokens","parameters":[{"name":"branchId","in":"path","required":true,"schema":{"type":"string","description":"ID of the branch or \"default\".","example":"default"},"example":"default"},{"name":"sourceId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the source.","example":"github-webhook-source","minLength":1,"maxLength":48},"example":"github-webhook-source"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Source"},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github.","http":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}}}},"404":{"description":"stream.api.sourceNotFound: Source not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.sourceNotFound","message":"Source \"github-pull-requests\" not found."}}}}},"security":[{"storage-api-token":[]}]}},"/v1/documentation/openapi.json":{"get":{"tags":["documentation"],"summary":"Swagger 2.0 JSON Specification","operationId":"OpenapiJson","responses":{"200":{"description":"File downloaded"}}}},"/v1/documentation/openapi.yaml":{"get":{"tags":["documentation"],"summary":"Swagger 2.0 YAML Specification","operationId":"OpenapiYaml","responses":{"200":{"description":"File downloaded"}}}},"/v1/documentation/openapi3.json":{"get":{"tags":["documentation"],"summary":"OpenAPI 3.0 JSON Specification","operationId":"Openapi3Json","responses":{"200":{"description":"File downloaded"}}}},"/v1/documentation/openapi3.yaml":{"get":{"tags":["documentation"],"summary":"OpenAPI 3.0 YAML Specification","operationId":"Openapi3Yaml","responses":{"200":{"description":"File downloaded"}}}},"/v1/tasks/{taskId}":{"get":{"tags":["configuration"],"summary":"Get task","description":"Get details of a task.","operationId":"GetTask","parameters":[{"name":"taskId","in":"path","required":true,"schema":{"type":"string","description":"Unique ID of the task.","example":"task_1234"},"example":"task_1234"}],"responses":{"200":{"description":"OK response.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"},"example":{"taskId":"task_1234","type":"abc123","url":"abc123","status":"success","isFinished":false,"createdAt":"2022-04-28T14:20:04.000Z","finishedAt":"2022-04-28T14:20:04.000Z","duration":123456789,"result":"abc123","error":"abc123","outputs":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}}}}},"404":{"description":"stream.api.taskNotFound: Task not found error.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenericError"},"example":{"statusCode":404,"error":"stream.api.taskNotFound","message":"Task \"001\" not found."}}}}},"security":[{"storage-api-token":[]}]}}},"components":{"schemas":{"By":{"type":"object","properties":{"tokenId":{"type":"string","description":"ID of the token.","example":"896455"},"type":{"type":"string","description":"Date and time of deletion.","example":"user","enum":["system","user"]},"userDescription":{"type":"string","description":"Description of the user.","example":"user@company.com"},"userId":{"type":"string","description":"ID of the user.","example":"578621"}},"description":"Information about the operation actor.","example":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"required":["type"]},"CreateSinkRequestBody":{"type":"object","properties":{"description":{"type":"string","description":"Description of the source.","example":"The sink stores records to a table.","maxLength":4096},"name":{"type":"string","description":"Human readable name of the sink.","example":"Raw Data Sink","minLength":1,"maxLength":40},"sinkId":{"type":"string","description":"Optional ID, if not filled in, it will be generated from name. Cannot be changed later.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"table":{"$ref":"#/components/schemas/TableSinkCreate"},"type":{"type":"string","example":"table","enum":["table"]}},"example":{"sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}}},"required":["type","name"]},"CreateSourceRequestBody":{"type":"object","properties":{"description":{"type":"string","description":"Description of the source.","example":"The source receives events from Github.","maxLength":4096},"name":{"type":"string","description":"Human readable name of the source.","example":"Github Webhook Source","minLength":1,"maxLength":40},"sourceId":{"type":"string","description":"Optional ID, if not filled in, it will be generated from name. Cannot be changed later.","example":"github-webhook-source","minLength":1,"maxLength":48},"type":{"type":"string","example":"http","enum":["http"]}},"example":{"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github."},"required":["type","name"]},"DeletedEntity":{"type":"object","properties":{"at":{"type":"string","description":"Date and time of deletion.","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"by":{"$ref":"#/components/schemas/By"}},"description":"Information about the deleted entity.","example":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"required":["at","by"]},"DisabledEntity":{"type":"object","properties":{"at":{"type":"string","description":"Date and time of disabling.","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"by":{"$ref":"#/components/schemas/By"},"reason":{"type":"string","description":"Why was the entity disabled?","example":"Disabled for recurring problems."}},"description":"Information about the disabled entity.","example":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."},"required":["at","by","reason"]},"GenericError":{"type":"object","properties":{"error":{"type":"string","description":"Name of error.","example":"stream.internalError"},"message":{"type":"string","description":"Error message.","example":"Internal Error"},"statusCode":{"type":"integer","description":"HTTP status code.","example":500,"format":"int64"}},"description":"Source already exists in the branch.","example":{"statusCode":409,"error":"stream.api.sourceAlreadyExists","message":"Source already exists in the branch."},"required":["statusCode","error","message"]},"HTTPSource":{"type":"object","properties":{"url":{"type":"string","description":"URL of the HTTP source. Contains secret used for authentication.","example":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"}},"description":"HTTP source details for \"type\" = \"http\".","example":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"required":["url"]},"Level":{"type":"object","properties":{"firstRecordAt":{"type":"string","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"lastRecordAt":{"type":"string","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"recordsCount":{"type":"integer","example":1,"format":"int64"},"uncompressedSize":{"type":"integer","example":1,"format":"int64"}},"example":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"required":["recordsCount","uncompressedSize"]},"Levels":{"type":"object","properties":{"local":{"$ref":"#/components/schemas/Level"},"staging":{"$ref":"#/components/schemas/Level"},"target":{"$ref":"#/components/schemas/Level"}},"example":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}},"required":["local","staging","target"]},"PaginatedResponse":{"type":"object","properties":{"lastId":{"type":"string","description":"ID of the last record in the response.","example":"my-object-456"},"limit":{"type":"integer","description":"Current limit.","example":100,"format":"int64"},"sinceId":{"type":"string","description":"Current offset.","example":"my-object-123"},"totalCount":{"type":"integer","description":"Total count of all records.","example":1000,"format":"int64"}},"example":{"limit":100,"totalCount":1000,"sinceId":"my-object-123","lastId":"my-object-456"},"required":["sinceId","limit","lastId","totalCount"]},"ServiceDetail":{"type":"object","properties":{"api":{"type":"string","description":"Name of the API","example":"stream"},"documentation":{"type":"string","description":"URL of the API documentation.","example":"https://stream.keboola.com/v1/documentation"}},"example":{"api":"stream","documentation":"https://stream.keboola.com/v1/documentation"},"required":["api","documentation"]},"SettingPatch":{"type":"object","properties":{"key":{"type":"string","description":"Key path.","example":"some.service.limit","minLength":1},"value":{"description":"A new key value. Use null to reset the value to the default value.","example":"1m20s"}},"description":"One setting key-value pair.","example":{"key":"some.service.limit","value":"1m20s"},"required":["key"]},"SettingResult":{"type":"object","properties":{"defaultValue":{"description":"Default value.","example":"30s"},"description":{"type":"string","description":"Key description.","example":"Minimal interval between uploads."},"key":{"type":"string","description":"Key path.","example":"some.service.limit"},"overwritten":{"type":"boolean","description":"True, if the default value is locally overwritten.","example":true},"protected":{"type":"boolean","description":"True, if only a super admin can modify the key.","example":false},"type":{"type":"string","description":"Value type.","example":"string","enum":["string","int","float","bool","[]string","[]int","[]float"]},"validation":{"type":"string","description":"Validation rules as a string definition.","example":"minDuration=15s"},"value":{"description":"Actual value.","example":"1m20s"}},"description":"One setting key-value pair.","example":{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"},"required":["key","type","description","value","defaultValue","overwritten","protected"]},"SettingsResult":{"type":"object","properties":{"settings":{"type":"array","items":{"$ref":"#/components/schemas/SettingResult"},"example":[{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"}]}},"example":{"settings":[{"key":"some.service.limit","type":"string","description":"Minimal interval between uploads.","value":"1m20s","defaultValue":"30s","overwritten":true,"protected":false,"validation":"minDuration=15s"}]}},"Sink":{"type":"object","properties":{"branchId":{"type":"integer","example":345,"format":"int64"},"deleted":{"$ref":"#/components/schemas/DeletedEntity"},"description":{"type":"string","description":"Description of the source.","example":"The sink stores records to a table.","maxLength":4096},"disabled":{"$ref":"#/components/schemas/DisabledEntity"},"name":{"type":"string","description":"Human readable name of the sink.","example":"Raw Data Sink","minLength":1,"maxLength":40},"projectId":{"type":"integer","example":123,"format":"int64"},"sinkId":{"type":"string","example":"github-pr-table-sink","minLength":1,"maxLength":48},"sourceId":{"type":"string","example":"github-webhook-source","minLength":1,"maxLength":48},"table":{"$ref":"#/components/schemas/TableSinkCreate"},"type":{"type":"string","example":"table","enum":["table"]},"version":{"$ref":"#/components/schemas/Version"}},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}},"required":["projectId","branchId","sourceId","sinkId","type","name","description","version"]},"SinkFile":{"type":"object","properties":{"closingAt":{"type":"string","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"importedAt":{"type":"string","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"importingAt":{"type":"string","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"openedAt":{"type":"string","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"state":{"type":"string","example":"writing","enum":["writing","closing","importing","imported"]},"statistics":{"$ref":"#/components/schemas/SinkStatisticsTotalResult"}},"example":{"state":"writing","openedAt":"2022-04-28T14:20:04.000Z","closingAt":"2022-04-28T14:20:04.000Z","importingAt":"2022-04-28T14:20:04.000Z","importedAt":"2022-04-28T14:20:04.000Z","statistics":{"total":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"levels":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}}}},"required":["state","openedAt","statistics"]},"SinkStatisticsFilesResult":{"type":"object","properties":{"files":{"type":"array","items":{"$ref":"#/components/schemas/SinkFile"},"example":[{"state":"writing","openedAt":"2022-04-28T14:20:04.000Z","closingAt":"2022-04-28T14:20:04.000Z","importingAt":"2022-04-28T14:20:04.000Z","importedAt":"2022-04-28T14:20:04.000Z","statistics":{"total":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"levels":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}}}}]}},"example":{"files":[{"state":"writing","openedAt":"2022-04-28T14:20:04.000Z","closingAt":"2022-04-28T14:20:04.000Z","importingAt":"2022-04-28T14:20:04.000Z","importedAt":"2022-04-28T14:20:04.000Z","statistics":{"total":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"levels":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}}}}]},"required":["files"]},"SinkStatisticsTotalResult":{"type":"object","properties":{"levels":{"$ref":"#/components/schemas/Levels"},"total":{"$ref":"#/components/schemas/Level"}},"example":{"total":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"levels":{"local":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"staging":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1},"target":{"firstRecordAt":"2022-04-28T14:20:04.000Z","lastRecordAt":"2022-04-28T14:20:04.000Z","recordsCount":1,"uncompressedSize":1}}},"required":["total","levels"]},"SinksList":{"type":"object","properties":{"branchId":{"type":"integer","example":345,"format":"int64"},"page":{"$ref":"#/components/schemas/PaginatedResponse"},"projectId":{"type":"integer","example":123,"format":"int64"},"sinks":{"type":"array","items":{"$ref":"#/components/schemas/Sink"},"example":[{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}]},"sourceId":{"type":"string","example":"github-webhook-source","minLength":1,"maxLength":48}},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","page":{"limit":100,"totalCount":1000,"sinceId":"my-object-123","lastId":"my-object-456"},"sinks":[{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}]},"required":["projectId","branchId","sourceId","page","sinks"]},"Source":{"type":"object","properties":{"branchId":{"type":"integer","example":345,"format":"int64"},"deleted":{"$ref":"#/components/schemas/DeletedEntity"},"description":{"type":"string","description":"Description of the source.","example":"The source receives events from Github.","maxLength":4096},"disabled":{"$ref":"#/components/schemas/DisabledEntity"},"http":{"$ref":"#/components/schemas/HTTPSource"},"name":{"type":"string","description":"Human readable name of the source.","example":"Github Webhook Source","minLength":1,"maxLength":40},"projectId":{"type":"integer","example":123,"format":"int64"},"sourceId":{"type":"string","example":"github-webhook-source","minLength":1,"maxLength":48},"type":{"type":"string","example":"http","enum":["http"]},"version":{"$ref":"#/components/schemas/Version"}},"description":"Source of data for further processing, start of the stream, max 100 sources per a branch.","example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github.","http":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}},"required":["projectId","branchId","sourceId","type","name","description","version"]},"SourcesList":{"type":"object","properties":{"branchId":{"type":"integer","example":345,"format":"int64"},"page":{"$ref":"#/components/schemas/PaginatedResponse"},"projectId":{"type":"integer","example":123,"format":"int64"},"sources":{"type":"array","items":{"$ref":"#/components/schemas/Source"},"example":[{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github.","http":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}]}},"example":{"projectId":123,"branchId":345,"page":{"limit":100,"totalCount":1000,"sinceId":"my-object-123","lastId":"my-object-456"},"sources":[{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","type":"http","name":"Github Webhook Source","description":"The source receives events from Github.","http":{"url":"https://stream-in.keboola.com/G0lpTbz0vhakDicfoDQQ3BCzGYdW3qewd1D3eUbqETygHKGb"},"version":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"deleted":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"}},"disabled":{"at":"2022-04-28T14:20:04.000Z","by":{"type":"user","tokenId":"896455","userId":"578621","userDescription":"user@company.com"},"reason":"Disabled for recurring problems."}}]},"required":["projectId","branchId","page","sources"]},"TableColumn":{"type":"object","properties":{"name":{"type":"string","description":"Column name.","example":"id-col"},"primaryKey":{"type":"boolean","description":"Sets this column as a part of the primary key of the destination table.","default":false,"example":false},"template":{"$ref":"#/components/schemas/TableColumnTemplate"},"type":{"type":"string","description":"Column mapping type. This represents a static mapping (e.g. `body` or `headers`), or a custom mapping using a template language (`template`).","example":"id","enum":["id","datetime","ip","body","headers","template"]}},"description":"An output mapping defined by a template.","example":{"primaryKey":false,"type":"id","name":"id-col","template":{"language":"jsonnet","content":"body.foo + \"-\" + body.bar"}},"required":["type","name"]},"TableColumnTemplate":{"type":"object","properties":{"content":{"type":"string","example":"body.foo + \"-\" + body.bar","minLength":1,"maxLength":4096},"language":{"type":"string","example":"jsonnet","enum":["jsonnet"]}},"description":"Template column definition, for \"type\" = \"template\".","example":{"language":"jsonnet","content":"body.foo + \"-\" + body.bar"},"required":["language","content"]},"TableMapping":{"type":"object","properties":{"columns":{"type":"array","items":{"$ref":"#/components/schemas/TableColumn"},"example":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}],"minItems":1,"maxItems":100}},"description":"Table mapping definition.","example":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]},"required":["columns"]},"TableSinkCreate":{"type":"object","properties":{"mapping":{"$ref":"#/components/schemas/TableMapping"},"tableId":{"type":"string","example":"in.c-bucket.table"},"type":{"type":"string","example":"keboola","enum":["keboola"]}},"description":"Table sink configuration for \"type\" = \"table\".","example":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}},"required":["type","tableId","mapping"]},"TableSinkUpdate":{"type":"object","properties":{"mapping":{"$ref":"#/components/schemas/TableMapping"},"tableId":{"type":"string","example":"in.c-bucket.table"},"type":{"type":"string","example":"keboola","enum":["keboola"]}},"description":"Table sink configuration for \"type\" = \"table\".","example":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}}},"Task":{"type":"object","properties":{"createdAt":{"type":"string","description":"Date and time of the task creation.","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"duration":{"type":"integer","description":"Duration of the task in milliseconds.","example":123456789,"format":"int64"},"error":{"type":"string","example":"abc123"},"finishedAt":{"type":"string","description":"Date and time of the task end.","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"isFinished":{"type":"boolean","description":"Shortcut for status != \"processing\".","example":false},"outputs":{"$ref":"#/components/schemas/TaskOutputs"},"result":{"type":"string","example":"abc123"},"status":{"type":"string","description":"Task status, one of: processing, success, error","example":"success","enum":["processing","success","error"]},"taskId":{"type":"string","example":"task_1234"},"type":{"type":"string","description":"Task type.","example":"abc123"},"url":{"type":"string","description":"URL of the task.","example":"abc123"}},"example":{"taskId":"task_1234","type":"abc123","url":"abc123","status":"success","isFinished":false,"createdAt":"2022-04-28T14:20:04.000Z","finishedAt":"2022-04-28T14:20:04.000Z","duration":123456789,"result":"abc123","error":"abc123","outputs":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}},"required":["taskId","type","url","status","isFinished","createdAt"]},"TaskOutputs":{"type":"object","properties":{"branchId":{"type":"integer","description":"ID of the parent branch.","example":345,"format":"int64"},"projectId":{"type":"integer","description":"ID of the parent project.","example":123,"format":"int64"},"sinkId":{"type":"string","description":"ID of the created/updated sink.","example":"github-pr-table-sink","minLength":1,"maxLength":48},"sourceId":{"type":"string","description":"ID of the created/updated source.","example":"github-webhook-source","minLength":1,"maxLength":48},"url":{"type":"string","description":"Absolute URL of the entity.","example":"abc123"}},"description":"Outputs generated by the task.","example":{"url":"abc123","projectId":123,"branchId":345,"sourceId":"github-webhook-source","sinkId":"github-pr-table-sink"}},"TestResult":{"type":"object","properties":{"branchId":{"type":"integer","example":345,"format":"int64"},"projectId":{"type":"integer","example":123,"format":"int64"},"sourceId":{"type":"string","example":"github-webhook-source","minLength":1,"maxLength":48},"tables":{"type":"array","items":{"$ref":"#/components/schemas/TestResultTable"},"description":"Table for each configured sink.","example":[{"sinkId":"github-pr-table-sink","tableId":"in.c-bucket.table","rows":[{"columns":[{"name":"id","value":"12345"}]}]}]}},"example":{"projectId":123,"branchId":345,"sourceId":"github-webhook-source","tables":[{"sinkId":"github-pr-table-sink","tableId":"in.c-bucket.table","rows":[{"columns":[{"name":"id","value":"12345"}]}]}]},"required":["projectId","branchId","sourceId","tables"]},"TestResultColumn":{"type":"object","properties":{"name":{"type":"string","description":"Column name.","example":"id"},"value":{"type":"string","description":"Column value.","example":"12345"}},"description":"Generated table column value, part of the test result.","example":{"name":"id","value":"12345"},"required":["name","value"]},"TestResultRow":{"type":"object","properties":{"columns":{"type":"array","items":{"$ref":"#/components/schemas/TestResultColumn"},"description":"Generated columns.","example":[{"name":"id","value":"12345"}]}},"description":"Generated table row, part of the test result.","example":{"columns":[{"name":"id","value":"12345"}]},"required":["columns"]},"TestResultTable":{"type":"object","properties":{"rows":{"type":"array","items":{"$ref":"#/components/schemas/TestResultRow"},"description":"Generated rows.","example":[{"columns":[{"name":"id","value":"12345"}]}]},"sinkId":{"type":"string","example":"github-pr-table-sink","minLength":1,"maxLength":48},"tableId":{"type":"string","example":"in.c-bucket.table"}},"description":"Generated table rows, part of the test result.","example":{"sinkId":"github-pr-table-sink","tableId":"in.c-bucket.table","rows":[{"columns":[{"name":"id","value":"12345"}]}]},"required":["sinkId","tableId","rows"]},"UpdateSinkRequestBody":{"type":"object","properties":{"changeDescription":{"type":"string","description":"Description of the modification, description of the version.","example":"Renamed."},"description":{"type":"string","description":"Description of the source.","example":"The sink stores records to a table.","maxLength":4096},"name":{"type":"string","description":"Human readable name of the sink.","example":"Raw Data Sink","minLength":1,"maxLength":40},"table":{"$ref":"#/components/schemas/TableSinkUpdate"},"type":{"type":"string","example":"table","enum":["table"]}},"example":{"changeDescription":"Renamed.","type":"table","name":"Raw Data Sink","description":"The sink stores records to a table.","table":{"type":"keboola","tableId":"in.c-bucket.table","mapping":{"columns":[{"type":"id","name":"id-col","primaryKey":true},{"type":"datetime","name":"datetime-col"},{"type":"ip","name":"ip-col"},{"type":"headers","name":"headers-col"},{"type":"body","name":"body-col"},{"type":"template","name":"template-col","language":"jsonnet","content":"body.foo + \"-\" + body.bar"}]}}}},"UpdateSourceRequestBody":{"type":"object","properties":{"changeDescription":{"type":"string","description":"Description of the modification, description of the version.","example":"Renamed."},"description":{"type":"string","description":"Description of the source.","example":"The source receives events from Github.","maxLength":4096},"name":{"type":"string","description":"Human readable name of the source.","example":"Github Webhook Source","minLength":1,"maxLength":40},"type":{"type":"string","example":"http","enum":["http"]}},"example":{"changeDescription":"Renamed.","type":"http","name":"Github Webhook Source","description":"The source receives events from Github."}},"UpdateSourceSettingsRequestBody":{"type":"object","properties":{"changeDescription":{"type":"string","description":"Description of the modification, description of the version.","example":"Updated settings."},"settings":{"type":"array","items":{"$ref":"#/components/schemas/SettingPatch"},"example":[{"key":"some.service.limit","value":"1m20s"}]}},"example":{"changeDescription":"Updated settings.","settings":[{"key":"some.service.limit","value":"1m20s"}]}},"Version":{"type":"object","properties":{"description":{"type":"string","description":"Description of the change.","example":"The reason for the last change was..."},"hash":{"type":"string","description":"Hash of the entity state.","example":"f43e93acd97eceb3"},"modifiedAt":{"type":"string","description":"Date and time of the modification.","example":"2022-04-28T14:20:04.000Z","format":"date-time"},"number":{"type":"integer","description":"Version number counted from 1.","example":3,"format":"int64","minimum":1}},"description":"Version of the entity.","example":{"number":3,"hash":"f43e93acd97eceb3","modifiedAt":"2022-04-28T14:20:04.000Z","description":"The reason for the last change was..."},"required":["number","hash","modifiedAt","description"]}},"securitySchemes":{"storage-api-token":{"type":"apiKey","description":"Storage Api Token Authentication.","name":"X-StorageApi-Token","in":"header"}}},"tags":[{"name":"stream","description":"A service for continuously importing data to the Keboola platform."}]}